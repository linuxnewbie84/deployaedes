{% extends 'base.html' %}
 
{% block content %}
    <div class="panel panel-default" style="margin-top: 50px;">
        <div class="panel-heading"><b>Conteo de Huevecillos</b></div>
        <div class="panel-body">
            <form id="uploadImage" method="post" action="/subir" enctype="multipart/form-data">
                <div class="row mb-4">
                    <div class="col-md-4 col-lg-4 "></div>
                    <div class="col-md-8 col-lg-8"></div>
                </div>
                <div class="form-group">
                    <label>Subir imagen de Ovitrampa</label>
                    <input type="file" name="file" multiple="false" id="file" />
                </div>
                <div class="form-group">
                    <input type="submit" id="uploadSubmit" value="Enviar" class="btn btn-info" />
                </div>
                <div class="progress">
                    <div class="progress-bar progress-bar-striped bg-success" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                <div id="targetLayer" style="display:none;"></div>
            </form>
    <div class="panel panel-default" style="margin-top: 50px;">
        <div class="panel-heading"><b>Resultados</b></div>
        <div class="panel-body">
            <form id="Recibirimagen" method="get" action="/recibir/" enctype="text/plain">
                <div class="row mb-4">
                    <div class="col-md-6 col-lg-4 "></div>
                    <div class="col-md-6 col-lg-8"></div>
                </div>
                <div class"form-group">
                    <label for="file">Recibir Imagen de Resultados</label>
                    <input type="text" name="file" maxlength ="40" required/>
                </div>
                <div class="form-group">
                    <input type=submit id="Visualizar" value="Visualizar" class="btn btn-info" />
                </div> 
        </div>
        <footer class="bg-light text-center text-white">
        <!-- Grid container -->
            <div class="container p-4 pb-0">
                <!-- Section: Social media -->
                <section class="mb-4">
                <!-- Facebook -->
                <a
                    class="btn text-white btn-floating m-1"
                    style="background-color: #3b5998;"
                    href="https://www.facebook.com/linuxnewbie"
                    role="button"
                    ><i class="fa-brands fa-facebook-f"></i>
                </a>

                <!-- Twitter -->
                <a
                    class="btn text-white btn-floating m-1"
                    style="background-color: #55acee;"
                    href="https://twitter.com/linuxnerwbie"
                    role="button"
                    ><i class="fab fa-twitter"></i
                ></a>

                <!-- Google -->
                <a
                    class="btn text-white btn-floating m-1"
                    style="background-color: #dd4b39;"
                    href="mailto:rebeto06@gmail.com"
                    role="button"
                    ><i class="fab fa-google"></i
                ></a>

                <!-- Instagram -->
                <a
                    class="btn text-white btn-floating m-1"
                    style="background-color: #ac2bac;"
                    href="https://www.instagram.com/linuxnewbie/"
                    role="button"
                    ><i class="fab fa-instagram"></i
                ></a>

                <!-- Linkedin -->
                <a
                    class="btn text-white btn-floating m-1"
                    style="background-color: #0082ca;"
                    href="https://www.linkedin.com/in/jes%C3%BAs-alberto-palma-garc%C3%ADa-890a68232/"
                    role="button"
                    ><i class="fab fa-linkedin-in"></i
                ></a>
                <!-- Github -->
                <a
                    class="btn text-white btn-floating m-1"
                    style="background-color: #333333;"
                    href="https://github.com/linuxnewbie84"
                    role="button"
                    ><i class="fab fa-github"></i
                ></a>
                </section>
                <!-- Section: Social media -->
            </div>
            <!-- Grid container -->

            <!-- Copyright -->
            <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2);">
                ©2023 Copyright:
                <a class="text-dark">Ing. Jesús Alberto Palma García</a>
            </div>
            <!-- Copyright -->
            </footer>
    </div>
<script>
$(document).ready(function(){
$('#uploadImage').submit(function(event){
    if($('#file').val()){
        event.preventDefault();
        $('#targetLayer').hide();
        $(this).ajaxSubmit({
            target: '#targetLayer',
            beforeSubmit:function(){
                $('.progress-bar').width('50%');
            },
            uploadProgress: function(event, position, total, percentageComplete)
            {
                $('.progress-bar').animate({
                    width: percentageComplete + '%'
                }, {
                    duration: 1000
                });
            },
            success:function(data){ //alert(data);
                $('#targetLayer').show();
                $('#targetLayer').append(data.htmlresponse);
            },
            resetForm: true
        });
    }
    return false;
});
});
</script>
{% endblock content %}